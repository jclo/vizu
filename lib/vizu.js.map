{"version":3,"sources":["node_modules/browser-pack/_prelude.js","index.js","src/component.js","src/vizu.js"],"names":[],"mappings":"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","file":"vizu.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import Component from './src/component';\nimport Vizu from './src/vizu';\n\nexport default { Component, Vizu };\n","/* global document */\n/* */\n\n// -- Vendor modules\n\n// -- Local modules\nimport Vizu from './vizu';\n\n// -- Global constants (in the scope of this module)\n\n// -- Global variables (in the scope of this module)\n\n\n// -- Private Functions --------------------------------------------------------\n\n\n// -- Public Methods -----------------------------------------------------------\n\n/**\n* This class defines the web component.\n*\n* @namespace vizu\n*/\nclass Component {\n\n/**\n * Creates an unique ID for this component.\n *\n * @constructor ()\n * @public\n * @param {}          -,\n */\n  constructor() {\n    // Create an unique id for this component:\n    this.id = `i${Math.random().toString(36).substr(2, 7)}`;\n    this.cList = null;\n    this.components = null;\n    this.props = {};\n    this.props.options = {};\n  }\n\n  /**\n   * Initialises the variables when the component is rendered.\n   *\n   * @method ()\n   * @public\n   * @param {}        -,\n   * @returns {}      -,\n   * @since 0.0.0\n   */\n  getInitialState() {\n    // To avoid eslint error!\n    this.props = {};\n    this.props.options = {};\n  }\n\n/**\n * Returns the the first element that matches the specified CSS selector(s).\n *\n * @method (arg1)\n * @public\n * @param {String}    the CSS selector(s),\n * @returns {Object}  returns the first element that matches a specified\n *                    CSS selector(s),\n * @since 0.0.0\n */\n  $(el) {\n    const that = this;\n\n    /**\n     * Returns the the first element that matches the specified CSS selector(s).\n     *\n     * @method (arg1)\n     * @public\n     * @param {String}    the CSS selector(s),\n     * @returns {Object}  returns the first element that matches a specified\n     *                    CSS selector(s),\n     * @since 0.0.0\n     */\n    const getElement = function() {\n      if (el) {\n        // Returns the the first element that matches the selector(s):\n        return Vizu.vdom\n          ? Vizu.vdom.window.document.querySelector(`#${that.id}`).querySelector(el)\n          /* istanbul ignore next */\n          : document.querySelector(`#${that.id}`).querySelector(el);\n      }\n      // Return the entire 'web component':\n      return Vizu.vdom\n        ? Vizu.vdom.window.document.querySelector(`#${that.id}`)\n        /* istanbul ignore next */\n        : document.querySelector(`#${that.id}`);\n    };\n\n    /**\n     * Returns the DOMTokenList collection of the class attributes of the element.\n     *\n     * @method ()\n     * @public\n     * @param {}          -,\n     * @returns {Object}  returns the DOMTokenList of the element,\n     * @since 0.0.0\n     */\n    const getClassList = function() {\n      return getElement().classList;\n    };\n\n    /**\n     * Adds a class name to the element.\n     *\n     * @method (arg1)\n     * @public\n     * @param {String}    the class name to add,\n     * @returns {}        -,\n     * @since 0.0.0\n     */\n    const addClass = function(className) {\n      getElement().classList.add(className);\n    };\n\n    /**\n     * Removes a class name to the element.\n     *\n     * @method (arg1)\n     * @public\n     * @param {String}    the class name to remove,\n     * @returns {}        -,\n     * @since 0.0.0\n     */\n    const removeClass = function(className) {\n      getElement().classList.remove(className);\n    };\n\n    /**\n     * Toggles a class name for the element.\n     *\n     * @method (arg1)\n     * @public\n     * @param {String}    the class name to add/remove,\n     * @returns {}        -,\n     * @since 0.0.0\n     */\n    const toggleClass = function(className) {\n      getElement().classList.toggle(className);\n    };\n\n    /**\n     * Gets/Sets the HTML contents of the element,\n     *\n     * @method (arg1)\n     * @public\n     * @param {String}    the html contents to add,\n     * @returns {}        -,\n     * @since 0.0.0\n     */\n    const html = function(htmlstring) {\n      if (htmlstring) {\n        getElement().innerHTML = htmlstring;\n      }\n      return getElement().innerHTML;\n    };\n\n    /**\n     * Gets/Sets the text contents of the element,\n     *\n     * @method (arg1)\n     * @public\n     * @param {String}    the text contents to add,\n     * @returns {}        -,\n     * @since 0.0.0\n     */\n    const text = function(texte) {\n      if (texte) {\n        getElement().textContent = texte;\n      }\n      return getElement().textContent;\n    };\n\n    return {\n      id: getElement() ? getElement().id : null,\n      getElement,\n      getClassList,\n      addClass,\n      removeClass,\n      toggleClass,\n      html,\n      text,\n    };\n  }\n\n  /**\n   * Returns the defined web component.\n   *\n   * @method ()\n   * @public\n   * @param {}          -,\n   * @returns {String}  returns the web component,\n   * @since 0.0.0\n   */\n  /* istanbul ignore next */\n  render() {\n    return `<div>${this.id}</div>`;\n  }\n\n  /**\n   * Processes the web component to convert child(s) to plain HTML.\n   *\n   * @method ()\n   * @public\n   * @param {}          -,\n   * @returns {String}  returns the web component,\n   * @since 0.0.0\n   */\n  get rendered() {\n    let t;\n    // Initializes:\n    this.getInitialState();\n    // Add an unique ID to this component:\n    // let t = this.render().replace(/<div>/, `<div id=\"${this.id}\">`);\n    const co = this.render();\n    if (co.match(/^\\s*<div/)) {\n      t = co.replace(/^\\s*<div/, `<div id= \"${this.id}\"`);\n    } else if (co.match(/^\\s*<header/)) {\n      t = co.replace(/^\\s*<header/, `<header id= \"${this.id}\"`);\n    } else if (co.match(/^\\s*<footer/)) {\n      t = co.replace(/^\\s*<footer/, `<footer id= \"${this.id}\"`);\n    } else {\n      t = co;\n    }\n\n    if (this.cList) {\n      // This component includes components, render them:\n      this.components = {};\n      const keys = Object.keys(this.cList);\n      for (let i = 0; i < keys.length; i++) {\n        const c = new this.cList[keys[i]]();\n        t = t.replace(keys[i], c.rendered);\n        this.components[keys[i].replace(/[^a-zA-z0-9]/g, '')] = c;\n      }\n    }\n    // Return the rendered web component:\n    return t;\n  }\n}\n\nexport default Component;\n","/* global document */\n/* eslint one-var: 0, no-param-reassign: 0, max-len: [1, 110],\n  no-unused-expressions: [\"error\", { \"allowTernary\": true }] */\n\n// -- Vendor modules\n\n// -- Local modules\n\n// -- Global constants (in the scope of this module)\n\n// -- Global variables (in the scope of this module)\n\n\n// -- Private Functions --------------------------------------------------------\n\n/**\n * Returns the path of the matching Web Component.\n *\n * @function ()\n * @private\n * @param {Object}    the view object,\n * @param {String}    the tag defining a Web Component\n * @returns {Object}  the path of the matching Web Component,\n */\nconst explore = function(view, tag) {\n  if (view.cList && view.cList[tag]) {\n    return view;\n  }\n  const keys = Object.keys(view);\n  for (let i = 0; i < keys.length; i++) {\n    if (view[keys[i]].cList) {\n      if (view[keys[i]].cList[tag]) {\n        return view[keys[i]];\n      }\n      if (view[keys[i]].components) {\n        return explore(view[keys[i]].components, tag);\n      }\n    }\n  }\n  return null;\n};\n\n\n// -- Public Methods -----------------------------------------------------------\n\n/**\n* This library renders the View in the DOM.\n*\n* @namespace Vizu\n*/\nconst Vizu = {\n\n  /**\n   * Returns the version of this library.\n   *\n   * @method ()\n   * @public\n   * @param {}          -,\n   * @returns {String}  returns the version of this library,\n   */\n  version() {\n    return '{{lib:version}}';\n  },\n\n  /**\n   * Renders the View in the DOM.\n   *\n   * @method (arg1, arg2, arg3)\n   * @public\n   * @param {String}    the aggregated web components,\n   * @param {Object}    the list of web components and their reference,\n   * @param {Object}    the DOM element where the view (the aggregate of web components) is inserted,\n   * @returns {Object}  returns the view object,\n   * @since 0.0.0\n   */\n  render(template, cList, el) {\n    const keys = Object.prototype.toString.call(cList) === '[object Object]' ? Object.keys(cList) : []\n        , view = {}\n        ;\n    let t;\n\n    // Return null if the template is not a string:\n    if (typeof template !== 'string') {\n      return null;\n    }\n\n    // If no components, render the template as is:\n    if (!cList) {\n      if (el) {\n        el.innerHTML = template;\n      } else {\n        Vizu.vdom\n          ? (Vizu.vdom.window.document.body.innerHTML += template)\n          : (document.body.innerHTML += template);\n      }\n      return null;\n    }\n\n    // This view includes components, render them:\n    t = template;\n    for (let i = 0; i < keys.length; i++) {\n      const c = new cList[keys[i]]();\n      t = t.replace(keys[i], c.rendered);\n      view[keys[i].replace(/[^a-zA-z0-9]/g, '')] = c;\n    }\n    // Attach cList:\n    view.cList = keys.length > 0 ? cList : null;\n\n    // Fill the DOM:\n    if (el) {\n      el.innerHTML = t;\n    } else {\n      el = Vizu.vdom ? Vizu.vdom.window.document.body : document.body;\n      el.innerHTML = +t;\n    }\n    // Attach parent element:\n    view.el = el;\n\n    // Return the rendered object (with a reference to all the web components):\n    return view;\n  },\n\n  /**\n   * Replaces a component with another component having the same tag.\n   *\n   * @method (arg1, arg2)\n   * @public\n   * @param {Object}    the view object,\n   * @param {Object}    the new component ({ '<Aaa />': 'new class' }),\n   * @returns {}        -,\n   * @since 0.0.0\n   */\n  /**\n   * Replaces a component with another component having the same tag.\n   *\n   * @method (arg1, arg2)\n   * @public\n   * @param {Object}    the view object,\n   * @param {Object}    the new component ({ '<Aaa />': 'new class' }),\n   * @returns {}        -,\n   * @since 0.0.0\n   */\n  replace(view, component) {\n    let id\n      , type\n      ;\n\n    // Check that view is an object with, at least, the properties cList and el:\n    if (Object.prototype.toString.call(view) !== '[object Object]' || !view.cList || !view.el) {\n      return;\n    }\n\n    // Check that component is an object:\n    if (Object.prototype.toString.call(component) !== '[object Object]') {\n      return;\n    }\n\n    // Process the new component:\n    const newctag = Object.keys(component)[0];\n    const newcname = newctag.replace(/[^a-zA-z0-9]/g, '');\n    const newc = new component[newctag]();\n\n    // Check if a component with the same name already exists in the view:\n    const path = explore(view, newctag);\n    if (path) {\n      // Get its id and remove it:\n      if (path[newcname]) {\n        id = path[newcname].id;\n        path[newcname] = null;\n        type = 1;\n      } else {\n        id = path.components[newcname].id;\n        path.components[newcname] = null;\n        type = 2;\n      }\n      path.cList[newctag] = null;\n\n      // Get its id and clear it:\n      const wrapper = Vizu.vdom\n        ? Vizu.vdom.window.document.createElement('div')\n        : document.createElement('div');\n\n      const oldNode = Vizu.vdom\n        ? Vizu.vdom.window.document.getElementById(id)\n        : document.getElementById(id);\n\n      wrapper.innerHTML = newc.rendered;\n      oldNode.parentNode.replaceChild(wrapper.firstChild, oldNode);\n\n      // Attach the new node to view:\n      if (type === 1) {\n        path[newcname] = newc;\n      } else {\n        path.components[newcname] = newc;\n      }\n      path.cList[newctag] = component[newctag];\n    }\n  },\n};\n\nexport default Vizu;\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJpbmRleC5qcyIsInNyYy9jb21wb25lbnQuanMiLCJzcmMvdml6dS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7OztBQ0FBOzs7O0FBQ0E7Ozs7OztrQkFFZSxFQUFFLDhCQUFGLEVBQWEsb0JBQWIsRTs7Ozs7Ozs7OztxakJDSGY7QUFDQTs7QUFFQTs7QUFFQTs7O0FBQ0E7Ozs7Ozs7O0FBRUE7O0FBRUE7OztBQUdBOzs7QUFHQTs7QUFFQTs7Ozs7SUFLTSxTOztBQUVOOzs7Ozs7O0FBT0UsdUJBQWM7QUFBQTs7QUFDWjtBQUNBLFNBQUssRUFBTCxTQUFjLEtBQUssTUFBTCxHQUFjLFFBQWQsQ0FBdUIsRUFBdkIsRUFBMkIsTUFBM0IsQ0FBa0MsQ0FBbEMsRUFBcUMsQ0FBckMsQ0FBZDtBQUNBLFNBQUssS0FBTCxHQUFhLElBQWI7QUFDQSxTQUFLLFVBQUwsR0FBa0IsSUFBbEI7QUFDQSxTQUFLLEtBQUwsR0FBYSxFQUFiO0FBQ0EsU0FBSyxLQUFMLENBQVcsT0FBWCxHQUFxQixFQUFyQjtBQUNEOztBQUVEOzs7Ozs7Ozs7Ozs7O3NDQVNrQjtBQUNoQjtBQUNBLFdBQUssS0FBTCxHQUFhLEVBQWI7QUFDQSxXQUFLLEtBQUwsQ0FBVyxPQUFYLEdBQXFCLEVBQXJCO0FBQ0Q7O0FBRUg7Ozs7Ozs7Ozs7Ozs7c0JBVUksRSxFQUFJO0FBQ0osVUFBTSxPQUFPLElBQWI7O0FBRUE7Ozs7Ozs7Ozs7QUFVQSxVQUFNLGFBQWEsU0FBYixVQUFhLEdBQVc7QUFDNUIsWUFBSSxFQUFKLEVBQVE7QUFDTjtBQUNBLGlCQUFPLGVBQUssSUFBTCxHQUNILGVBQUssSUFBTCxDQUFVLE1BQVYsQ0FBaUIsUUFBakIsQ0FBMEIsYUFBMUIsT0FBNEMsS0FBSyxFQUFqRCxFQUF1RCxhQUF2RCxDQUFxRSxFQUFyRTtBQUNGO0FBRkssWUFHSCxTQUFTLGFBQVQsT0FBMkIsS0FBSyxFQUFoQyxF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O0FBQ0Q7QUFDRCxXQUFLLEtBQUwsQ0FBVyxPQUFYLElBQXNCLElBQXRCOztBQUVBO0FBQ0EsVUFBTSxVQUFVLEtBQUssSUFBTCxHQUNaLEtBQUssSUFBTCxDQUFVLE1BQVYsQ0FBaUIsUUFBakIsQ0FBMEIsYUFBMUIsQ0FBd0MsS0FBeEMsQ0FEWSxHQUVaLFNBQVMsYUFBVCxDQUF1QixLQUF2QixDQUZKOztBQUlBLFVBQU0sVUFBVSxLQUFLLElBQUwsR0FDWixLQUFLLElBQUwsQ0FBVSxNQUFWLENBQWlCLFFBQWpCLENBQTBCLGNBQTFCLENBQXlDLEVBQXpDLENBRFksR0FFWixTQUFTLGNBQVQsQ0FBd0IsRUFBeEIsQ0FGSjs7QUFJQSxjQUFRLFNBQVIsR0FBb0IsS0FBSyxRQUF6QjtBQUNBLGNBQVEsVUFBUixDQUFtQixZQUFuQixDQUFnQyxRQUFRLFVBQXhDLEVBQW9ELE9BQXBEOztBQUVBO0FBQ0EsVUFBSSxTQUFTLENBQWIsRUFBZ0I7QUFDZCxhQUFLLFFBQUwsSUFBaUIsSUFBakI7QUFDRCxPQUZELE1BRU87QUFDTCxhQUFLLFVBQUwsQ0FBZ0IsUUFBaEIsSUFBNEIsSUFBNUI7QUFDRDtBQUNELFdBQUssS0FBTCxDQUFXLE9BQVgsSUFBc0IsVUFBVSxPQUFWLENBQXRCO0FBQ0Q7QUFDRjtBQW5KVSxDQUFiOztrQkFzSmUsSSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vc3JjL2NvbXBvbmVudCc7XG5pbXBvcnQgVml6dSBmcm9tICcuL3NyYy92aXp1JztcblxuZXhwb3J0IGRlZmF1bHQgeyBDb21wb25lbnQsIFZpenUgfTtcbiIsIi8qIGdsb2JhbCBkb2N1bWVudCAqL1xuLyogKi9cblxuLy8gLS0gVmVuZG9yIG1vZHVsZXNcblxuLy8gLS0gTG9jYWwgbW9kdWxlc1xuaW1wb3J0IFZpenUgZnJvbSAnLi92aXp1JztcblxuLy8gLS0gR2xvYmFsIGNvbnN0YW50cyAoaW4gdGhlIHNjb3BlIG9mIHRoaXMgbW9kdWxlKVxuXG4vLyAtLSBHbG9iYWwgdmFyaWFibGVzIChpbiB0aGUgc2NvcGUgb2YgdGhpcyBtb2R1bGUpXG5cblxuLy8gLS0gUHJpdmF0ZSBGdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG4vLyAtLSBQdWJsaWMgTWV0aG9kcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKipcbiogVGhpcyBjbGFzcyBkZWZpbmVzIHRoZSB3ZWIgY29tcG9uZW50LlxuKlxuKiBAbmFtZXNwYWNlIHZpenVcbiovXG5jbGFzcyBDb21wb25lbnQge1xuXG4vKipcbiAqIENyZWF0ZXMgYW4gdW5pcXVlIElEIGZvciB0aGlzIGNvbXBvbmVudC5cbiAqXG4gKiBAY29uc3RydWN0b3IgKClcbiAqIEBwdWJsaWNcbiAqIEBwYXJhbSB7fSAgICAgICAgICAtLFxuICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIENyZWF0ZSBhbiB1bmlxdWUgaWQgZm9yIHRoaXMgY29tcG9uZW50OlxuICAgIHRoaXMuaWQgPSBgaSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDcpfWA7XG4gICAgdGhpcy5jTGlzdCA9IG51bGw7XG4gICAgdGhpcy5jb21wb25lbnRzID0gbnVsbDtcbiAgICB0aGlzLnByb3BzID0ge307XG4gICAgdGhpcy5wcm9wcy5vcHRpb25zID0ge307XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGlzZXMgdGhlIHZhcmlhYmxlcyB3aGVuIHRoZSBjb21wb25lbnQgaXMgcmVuZGVyZWQuXG4gICAqXG4gICAqIEBtZXRob2QgKClcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge30gICAgICAgIC0sXG4gICAqIEByZXR1cm5zIHt9ICAgICAgLSxcbiAgICogQHNpbmNlIDAuMC4wXG4gICAqL1xuICBnZXRJbml0aWFsU3RhdGUoKSB7XG4gICAgLy8gVG8gYXZvaWQgZXNsaW50IGVycm9yIVxuICAgIHRoaXMucHJvcHMgPSB7fTtcbiAgICB0aGlzLnByb3BzLm9wdGlvbnMgPSB7fTtcbiAgfVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHRoZSBmaXJzdCBlbGVtZW50IHRoYXQgbWF0Y2hlcyB0aGUgc3BlY2lmaWVkIENTUyBzZWxlY3RvcihzKS5cbiAqXG4gKiBAbWV0aG9kIChhcmcxKVxuICogQHB1YmxpY1xuICogQHBhcmFtIHtTdHJpbmd9ICAgIHRoZSBDU1Mgc2VsZWN0b3IocyksXG4gKiBAcmV0dXJucyB7T2JqZWN0fSAgcmV0dXJucyB0aGUgZmlyc3QgZWxlbWVudCB0aGF0IG1hdGNoZXMgYSBzcGVjaWZpZWRcbiAqICAgICAgICAgICAgICAgICAgICBDU1Mgc2VsZWN0b3IocyksXG4gKiBAc2luY2UgMC4wLjBcbiAqL1xuICAkKGVsKSB7XG4gICAgY29uc3QgdGhhdCA9IHRoaXM7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB0aGUgZmlyc3QgZWxlbWVudCB0aGF0IG1hdGNoZXMgdGhlIHNwZWNpZmllZCBDU1Mgc2VsZWN0b3IocykuXG4gICAgICpcbiAgICAgKiBAbWV0aG9kIChhcmcxKVxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gICAgdGhlIENTUyBzZWxlY3RvcihzKSxcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSAgcmV0dXJucyB0aGUgZmlyc3QgZWxlbWVudCB0aGF0IG1hdGNoZXMgYSBzcGVjaWZpZWRcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgQ1NTIHNlbGVjdG9yKHMpLFxuICAgICAqIEBzaW5jZSAwLjAuMFxuICAgICAqL1xuICAgIGNvbnN0IGdldEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChlbCkge1xuICAgICAgICAvLyBSZXR1cm5zIHRoZSB0aGUgZmlyc3QgZWxlbWVudCB0aGF0IG1hdGNoZXMgdGhlIHNlbGVjdG9yKHMpOlxuICAgICAgICByZXR1cm4gVml6dS52ZG9tXG4gICAgICAgICAgPyBWaXp1LnZkb20ud2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke3RoYXQuaWR9YCkucXVlcnlTZWxlY3RvcihlbClcbiAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICAgIDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7dGhhdC5pZH1gKS5xdWVyeVNlbGVjdG9yKGVsKTtcbiAgICAgIH1cbiAgICAgIC8vIFJldHVybiB0aGUgZW50aXJlICd3ZWIgY29tcG9uZW50JzpcbiAgICAgIHJldHVybiBWaXp1LnZkb21cbiAgICAgICAgPyBWaXp1LnZkb20ud2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke3RoYXQuaWR9YClcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgICAgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHt0aGF0LmlkfWApO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBET01Ub2tlbkxpc3QgY29sbGVjdGlvbiBvZiB0aGUgY2xhc3MgYXR0cmlidXRlcyBvZiB0aGUgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBtZXRob2QgKClcbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHt9ICAgICAgICAgIC0sXG4gICAgICogQHJldHVybnMge09iamVjdH0gIHJldHVybnMgdGhlIERPTVRva2VuTGlzdCBvZiB0aGUgZWxlbWVudCxcbiAgICAgKiBAc2luY2UgMC4wLjBcbiAgICAgKi9cbiAgICBjb25zdCBnZXRDbGFzc0xpc3QgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBnZXRFbGVtZW50KCkuY2xhc3NMaXN0O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgY2xhc3MgbmFtZSB0byB0aGUgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBtZXRob2QgKGFyZzEpXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSAgICB0aGUgY2xhc3MgbmFtZSB0byBhZGQsXG4gICAgICogQHJldHVybnMge30gICAgICAgIC0sXG4gICAgICogQHNpbmNlIDAuMC4wXG4gICAgICovXG4gICAgY29uc3QgYWRkQ2xhc3MgPSBmdW5jdGlvbihjbGFzc05hbWUpIHtcbiAgICAgIGdldEVsZW1lbnQoKS5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBjbGFzcyBuYW1lIHRvIHRoZSBlbGVtZW50LlxuICAgICAqXG4gICAgICogQG1ldGhvZCAoYXJnMSlcbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtTdHJpbmd9ICAgIHRoZSBjbGFzcyBuYW1lIHRvIHJlbW92ZSxcbiAgICAgKiBAcmV0dXJucyB7fSAgICAgICAgLSxcbiAgICAgKiBAc2luY2UgMC4wLjBcbiAgICAgKi9cbiAgICBjb25zdCByZW1vdmVDbGFzcyA9IGZ1bmN0aW9uKGNsYXNzTmFtZSkge1xuICAgICAgZ2V0RWxlbWVudCgpLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVG9nZ2xlcyBhIGNsYXNzIG5hbWUgZm9yIHRoZSBlbGVtZW50LlxuICAgICAqXG4gICAgICogQG1ldGhvZCAoYXJnMSlcbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtTdHJpbmd9ICAgIHRoZSBjbGFzcyBuYW1lIHRvIGFkZC9yZW1vdmUsXG4gICAgICogQHJldHVybnMge30gICAgICAgIC0sXG4gICAgICogQHNpbmNlIDAuMC4wXG4gICAgICovXG4gICAgY29uc3QgdG9nZ2xlQ2xhc3MgPSBmdW5jdGlvbihjbGFzc05hbWUpIHtcbiAgICAgIGdldEVsZW1lbnQoKS5jbGFzc0xpc3QudG9nZ2xlKGNsYXNzTmFtZSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEdldHMvU2V0cyB0aGUgSFRNTCBjb250ZW50cyBvZiB0aGUgZWxlbWVudCxcbiAgICAgKlxuICAgICAqIEBtZXRob2QgKGFyZzEpXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSAgICB0aGUgaHRtbCBjb250ZW50cyB0byBhZGQsXG4gICAgICogQHJldHVybnMge30gICAgICAgIC0sXG4gICAgICogQHNpbmNlIDAuMC4wXG4gICAgICovXG4gICAgY29uc3QgaHRtbCA9IGZ1bmN0aW9uKGh0bWxzdHJpbmcpIHtcbiAgICAgIGlmIChodG1sc3RyaW5nKSB7XG4gICAgICAgIGdldEVsZW1lbnQoKS5pbm5lckhUTUwgPSBodG1sc3RyaW5nO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGdldEVsZW1lbnQoKS5pbm5lckhUTUw7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEdldHMvU2V0cyB0aGUgdGV4dCBjb250ZW50cyBvZiB0aGUgZWxlbWVudCxcbiAgICAgKlxuICAgICAqIEBtZXRob2QgKGFyZzEpXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSAgICB0aGUgdGV4dCBjb250ZW50cyB0byBhZGQsXG4gICAgICogQHJldHVybnMge30gICAgICAgIC0sXG4gICAgICogQHNpbmNlIDAuMC4wXG4gICAgICovXG4gICAgY29uc3QgdGV4dCA9IGZ1bmN0aW9uKHRleHRlKSB7XG4gICAgICBpZiAodGV4dGUpIHtcbiAgICAgICAgZ2V0RWxlbWVudCgpLnRleHRDb250ZW50ID0gdGV4dGU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZ2V0RWxlbWVudCgpLnRleHRDb250ZW50O1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGdldEVsZW1lbnQoKSA/IGdldEVsZW1lbnQoKS5pZCA6IG51bGwsXG4gICAgICBnZXRFbGVtZW50LFxuICAgICAgZ2V0Q2xhc3NMaXN0LFxuICAgICAgYWRkQ2xhc3MsXG4gICAgICByZW1vdmVDbGFzcyxcbiAgICAgIHRvZ2dsZUNsYXNzLFxuICAgICAgaHRtbCxcbiAgICAgIHRleHQsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBkZWZpbmVkIHdlYiBjb21wb25lbnQuXG4gICAqXG4gICAqIEBtZXRob2QgKClcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge30gICAgICAgICAgLSxcbiAgICogQHJldHVybnMge1N0cmluZ30gIHJldHVybnMgdGhlIHdlYiBjb21wb25lbnQsXG4gICAqIEBzaW5jZSAwLjAuMFxuICAgKi9cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiBgPGRpdj4ke3RoaXMuaWR9PC9kaXY+YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9jZXNzZXMgdGhlIHdlYiBjb21wb25lbnQgdG8gY29udmVydCBjaGlsZChzKSB0byBwbGFpbiBIVE1MLlxuICAgKlxuICAgKiBAbWV0aG9kICgpXG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHt9ICAgICAgICAgIC0sXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9ICByZXR1cm5zIHRoZSB3ZWIgY29tcG9uZW50LFxuICAgKiBAc2luY2UgMC4wLjBcbiAgICovXG4gIGdldCByZW5kZXJlZCgpIHtcbiAgICBsZXQgdDtcbiAgICAvLyBJbml0aWFsaXplczpcbiAgICB0aGlzLmdldEluaXRpYWxTdGF0ZSgpO1xuICAgIC8vIEFkZCBhbiB1bmlxdWUgSUQgdG8gdGhpcyBjb21wb25lbnQ6XG4gICAgLy8gbGV0IHQgPSB0aGlzLnJlbmRlcigpLnJlcGxhY2UoLzxkaXY+LywgYDxkaXYgaWQ9XCIke3RoaXMuaWR9XCI+YCk7XG4gICAgY29uc3QgY28gPSB0aGlzLnJlbmRlcigpO1xuICAgIGlmIChjby5tYXRjaCgvXlxccyo8ZGl2LykpIHtcbiAgICAgIHQgPSBjby5yZXBsYWNlKC9eXFxzKjxkaXYvLCBgPGRpdiBpZD0gXCIke3RoaXMuaWR9XCJgKTtcbiAgICB9IGVsc2UgaWYgKGNvLm1hdGNoKC9eXFxzKjxoZWFkZXIvKSkge1xuICAgICAgdCA9IGNvLnJlcGxhY2UoL15cXHMqPGhlYWRlci8sIGA8aGVhZGVyIGlkPSBcIiR7dGhpcy5pZH1cImApO1xuICAgIH0gZWxzZSBpZiAoY28ubWF0Y2goL15cXHMqPGZvb3Rlci8pKSB7XG4gICAgICB0ID0gY28ucmVwbGFjZSgvXlxccyo8Zm9vdGVyLywgYDxmb290ZXIgaWQ9IFwiJHt0aGlzLmlkfVwiYCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHQgPSBjbztcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jTGlzdCkge1xuICAgICAgLy8gVGhpcyBjb21wb25lbnQgaW5jbHVkZXMgY29tcG9uZW50cywgcmVuZGVyIHRoZW06XG4gICAgICB0aGlzLmNvbXBvbmVudHMgPSB7fTtcbiAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLmNMaXN0KTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjID0gbmV3IHRoaXMuY0xpc3Rba2V5c1tpXV0oKTtcbiAgICAgICAgdCA9IHQucmVwbGFjZShrZXlzW2ldLCBjLnJlbmRlcmVkKTtcbiAgICAgICAgdGhpcy5jb21wb25lbnRzW2tleXNbaV0ucmVwbGFjZSgvW15hLXpBLXowLTldL2csICcnKV0gPSBjO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBSZXR1cm4gdGhlIHJlbmRlcmVkIHdlYiBjb21wb25lbnQ6XG4gICAgcmV0dXJuIHQ7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29tcG9uZW50O1xuIiwiLyogZ2xvYmFsIGRvY3VtZW50ICovXG4vKiBlc2xpbnQgb25lLXZhcjogMCwgbm8tcGFyYW0tcmVhc3NpZ246IDAsIG1heC1sZW46IFsxLCAxMTBdLFxuICBuby11bnVzZWQtZXhwcmVzc2lvbnM6IFtcImVycm9yXCIsIHsgXCJhbGxvd1Rlcm5hcnlcIjogdHJ1ZSB9XSAqL1xuXG4vLyAtLSBWZW5kb3IgbW9kdWxlc1xuXG4vLyAtLSBMb2NhbCBtb2R1bGVzXG5cbi8vIC0tIEdsb2JhbCBjb25zdGFudHMgKGluIHRoZSBzY29wZSBvZiB0aGlzIG1vZHVsZSlcblxuLy8gLS0gR2xvYmFsIHZhcmlhYmxlcyAoaW4gdGhlIHNjb3BlIG9mIHRoaXMgbW9kdWxlKVxuXG5cbi8vIC0tIFByaXZhdGUgRnVuY3Rpb25zIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogUmV0dXJucyB0aGUgcGF0aCBvZiB0aGUgbWF0Y2hpbmcgV2ViIENvbXBvbmVudC5cbiAqXG4gKiBAZnVuY3Rpb24gKClcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gICAgdGhlIHZpZXcgb2JqZWN0LFxuICogQHBhcmFtIHtTdHJpbmd9ICAgIHRoZSB0YWcgZGVmaW5pbmcgYSBXZWIgQ29tcG9uZW50XG4gKiBAcmV0dXJucyB7T2JqZWN0fSAgdGhlIHBhdGggb2YgdGhlIG1hdGNoaW5nIFdlYiBDb21wb25lbnQsXG4gKi9cbmNvbnN0IGV4cGxvcmUgPSBmdW5jdGlvbih2aWV3LCB0YWcpIHtcbiAgaWYgKHZpZXcuY0xpc3QgJiYgdmlldy5jTGlzdFt0YWddKSB7XG4gICAgcmV0dXJuIHZpZXc7XG4gIH1cbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHZpZXcpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAodmlld1trZXlzW2ldXS5jTGlzdCkge1xuICAgICAgaWYgKHZpZXdba2V5c1tpXV0uY0xpc3RbdGFnXSkge1xuICAgICAgICByZXR1cm4gdmlld1trZXlzW2ldXTtcbiAgICAgIH1cbiAgICAgIGlmICh2aWV3W2tleXNbaV1dLmNvbXBvbmVudHMpIHtcbiAgICAgICAgcmV0dXJuIGV4cGxvcmUodmlld1trZXlzW2ldXS5jb21wb25lbnRzLCB0YWcpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cblxuLy8gLS0gUHVibGljIE1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4qIFRoaXMgbGlicmFyeSByZW5kZXJzIHRoZSBWaWV3IGluIHRoZSBET00uXG4qXG4qIEBuYW1lc3BhY2UgVml6dVxuKi9cbmNvbnN0IFZpenUgPSB7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHZlcnNpb24gb2YgdGhpcyBsaWJyYXJ5LlxuICAgKlxuICAgKiBAbWV0aG9kICgpXG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHt9ICAgICAgICAgIC0sXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9ICByZXR1cm5zIHRoZSB2ZXJzaW9uIG9mIHRoaXMgbGlicmFyeSxcbiAgICovXG4gIHZlcnNpb24oKSB7XG4gICAgcmV0dXJuICd7e2xpYjp2ZXJzaW9ufX0nO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBWaWV3IGluIHRoZSBET00uXG4gICAqXG4gICAqIEBtZXRob2QgKGFyZzEsIGFyZzIsIGFyZzMpXG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtTdHJpbmd9ICAgIHRoZSBhZ2dyZWdhdGVkIHdlYiBjb21wb25lbnRzLFxuICAgKiBAcGFyYW0ge09iamVjdH0gICAgdGhlIGxpc3Qgb2Ygd2ViIGNvbXBvbmVudHMgYW5kIHRoZWlyIHJlZmVyZW5jZSxcbiAgICogQHBhcmFtIHtPYmplY3R9ICAgIHRoZSBET00gZWxlbWVudCB3aGVyZSB0aGUgdmlldyAodGhlIGFnZ3JlZ2F0ZSBvZiB3ZWIgY29tcG9uZW50cykgaXMgaW5zZXJ0ZWQsXG4gICAqIEByZXR1cm5zIHtPYmplY3R9ICByZXR1cm5zIHRoZSB2aWV3IG9iamVjdCxcbiAgICogQHNpbmNlIDAuMC4wXG4gICAqL1xuICByZW5kZXIodGVtcGxhdGUsIGNMaXN0LCBlbCkge1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoY0xpc3QpID09PSAnW29iamVjdCBPYmplY3RdJyA/IE9iamVjdC5rZXlzKGNMaXN0KSA6IFtdXG4gICAgICAgICwgdmlldyA9IHt9XG4gICAgICAgIDtcbiAgICBsZXQgdDtcblxuICAgIC8vIFJldHVybiBudWxsIGlmIHRoZSB0ZW1wbGF0ZSBpcyBub3QgYSBzdHJpbmc6XG4gICAgaWYgKHR5cGVvZiB0ZW1wbGF0ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIElmIG5vIGNvbXBvbmVudHMsIHJlbmRlciB0aGUgdGVtcGxhdGUgYXMgaXM6XG4gICAgaWYgKCFjTGlzdCkge1xuICAgICAgaWYgKGVsKSB7XG4gICAgICAgIGVsLmlubmVySFRNTCA9IHRlbXBsYXRlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgVml6dS52ZG9tXG4gICAgICAgICAgPyAoVml6dS52ZG9tLndpbmRvdy5kb2N1bWVudC5ib2R5LmlubmVySFRNTCArPSB0ZW1wbGF0ZSlcbiAgICAgICAgICA6IChkb2N1bWVudC5ib2R5LmlubmVySFRNTCArPSB0ZW1wbGF0ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBUaGlzIHZpZXcgaW5jbHVkZXMgY29tcG9uZW50cywgcmVuZGVyIHRoZW06XG4gICAgdCA9IHRlbXBsYXRlO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYyA9IG5ldyBjTGlzdFtrZXlzW2ldXSgpO1xuICAgICAgdCA9IHQucmVwbGFjZShrZXlzW2ldLCBjLnJlbmRlcmVkKTtcbiAgICAgIHZpZXdba2V5c1tpXS5yZXBsYWNlKC9bXmEtekEtejAtOV0vZywgJycpXSA9IGM7XG4gICAgfVxuICAgIC8vIEF0dGFjaCBjTGlzdDpcbiAgICB2aWV3LmNMaXN0ID0ga2V5cy5sZW5ndGggPiAwID8gY0xpc3QgOiBudWxsO1xuXG4gICAgLy8gRmlsbCB0aGUgRE9NOlxuICAgIGlmIChlbCkge1xuICAgICAgZWwuaW5uZXJIVE1MID0gdDtcbiAgICB9IGVsc2Uge1xuICAgICAgZWwgPSBWaXp1LnZkb20gPyBWaXp1LnZkb20ud2luZG93LmRvY3VtZW50LmJvZHkgOiBkb2N1bWVudC5ib2R5O1xuICAgICAgZWwuaW5uZXJIVE1MID0gK3Q7XG4gICAgfVxuICAgIC8vIEF0dGFjaCBwYXJlbnQgZWxlbWVudDpcbiAgICB2aWV3LmVsID0gZWw7XG5cbiAgICAvLyBSZXR1cm4gdGhlIHJlbmRlcmVkIG9iamVjdCAod2l0aCBhIHJlZmVyZW5jZSB0byBhbGwgdGhlIHdlYiBjb21wb25lbnRzKTpcbiAgICByZXR1cm4gdmlldztcbiAgfSxcblxuICAvKipcbiAgICogUmVwbGFjZXMgYSBjb21wb25lbnQgd2l0aCBhbm90aGVyIGNvbXBvbmVudCBoYXZpbmcgdGhlIHNhbWUgdGFnLlxuICAgKlxuICAgKiBAbWV0aG9kIChhcmcxLCBhcmcyKVxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAgICB0aGUgdmlldyBvYmplY3QsXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAgICB0aGUgbmV3IGNvbXBvbmVudCAoeyAnPEFhYSAvPic6ICduZXcgY2xhc3MnIH0pLFxuICAgKiBAcmV0dXJucyB7fSAgICAgICAgLSxcbiAgICogQHNpbmNlIDAuMC4wXG4gICAqL1xuICAvKipcbiAgICogUmVwbGFjZXMgYSBjb21wb25lbnQgd2l0aCBhbm90aGVyIGNvbXBvbmVudCBoYXZpbmcgdGhlIHNhbWUgdGFnLlxuICAgKlxuICAgKiBAbWV0aG9kIChhcmcxLCBhcmcyKVxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAgICB0aGUgdmlldyBvYmplY3QsXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAgICB0aGUgbmV3IGNvbXBvbmVudCAoeyAnPEFhYSAvPic6ICduZXcgY2xhc3MnIH0pLFxuICAgKiBAcmV0dXJucyB7fSAgICAgICAgLSxcbiAgICogQHNpbmNlIDAuMC4wXG4gICAqL1xuICByZXBsYWNlKHZpZXcsIGNvbXBvbmVudCkge1xuICAgIGxldCBpZFxuICAgICAgLCB0eXBlXG4gICAgICA7XG5cbiAgICAvLyBDaGVjayB0aGF0IHZpZXcgaXMgYW4gb2JqZWN0IHdpdGgsIGF0IGxlYXN0LCB0aGUgcHJvcGVydGllcyBjTGlzdCBhbmQgZWw6XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2aWV3KSAhPT0gJ1tvYmplY3QgT2JqZWN0XScgfHwgIXZpZXcuY0xpc3QgfHwgIXZpZXcuZWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDaGVjayB0aGF0IGNvbXBvbmVudCBpcyBhbiBvYmplY3Q6XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChjb21wb25lbnQpICE9PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFByb2Nlc3MgdGhlIG5ldyBjb21wb25lbnQ6XG4gICAgY29uc3QgbmV3Y3RhZyA9IE9iamVjdC5rZXlzKGNvbXBvbmVudClbMF07XG4gICAgY29uc3QgbmV3Y25hbWUgPSBuZXdjdGFnLnJlcGxhY2UoL1teYS16QS16MC05XS9nLCAnJyk7XG4gICAgY29uc3QgbmV3YyA9IG5ldyBjb21wb25lbnRbbmV3Y3RhZ10oKTtcblxuICAgIC8vIENoZWNrIGlmIGEgY29tcG9uZW50IHdpdGggdGhlIHNhbWUgbmFtZSBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgdmlldzpcbiAgICBjb25zdCBwYXRoID0gZXhwbG9yZSh2aWV3LCBuZXdjdGFnKTtcbiAgICBpZiAocGF0aCkge1xuICAgICAgLy8gR2V0IGl0cyBpZCBhbmQgcmVtb3ZlIGl0OlxuICAgICAgaWYgKHBhdGhbbmV3Y25hbWVdKSB7XG4gICAgICAgIGlkID0gcGF0aFtuZXdjbmFtZV0uaWQ7XG4gICAgICAgIHBhdGhbbmV3Y25hbWVdID0gbnVsbDtcbiAgICAgICAgdHlwZSA9IDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZCA9IHBhdGguY29tcG9uZW50c1tuZXdjbmFtZV0uaWQ7XG4gICAgICAgIHBhdGguY29tcG9uZW50c1tuZXdjbmFtZV0gPSBudWxsO1xuICAgICAgICB0eXBlID0gMjtcbiAgICAgIH1cbiAgICAgIHBhdGguY0xpc3RbbmV3Y3RhZ10gPSBudWxsO1xuXG4gICAgICAvLyBHZXQgaXRzIGlkIGFuZCBjbGVhciBpdDpcbiAgICAgIGNvbnN0IHdyYXBwZXIgPSBWaXp1LnZkb21cbiAgICAgICAgPyBWaXp1LnZkb20ud2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgIGNvbnN0IG9sZE5vZGUgPSBWaXp1LnZkb21cbiAgICAgICAgPyBWaXp1LnZkb20ud2luZG93LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKVxuICAgICAgICA6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcblxuICAgICAgd3JhcHBlci5pbm5lckhUTUwgPSBuZXdjLnJlbmRlcmVkO1xuICAgICAgb2xkTm9kZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZCh3cmFwcGVyLmZpcnN0Q2hpbGQsIG9sZE5vZGUpO1xuXG4gICAgICAvLyBBdHRhY2ggdGhlIG5ldyBub2RlIHRvIHZpZXc6XG4gICAgICBpZiAodHlwZSA9PT0gMSkge1xuICAgICAgICBwYXRoW25ld2NuYW1lXSA9IG5ld2M7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXRoLmNvbXBvbmVudHNbbmV3Y25hbWVdID0gbmV3YztcbiAgICAgIH1cbiAgICAgIHBhdGguY0xpc3RbbmV3Y3RhZ10gPSBjb21wb25lbnRbbmV3Y3RhZ107XG4gICAgfVxuICB9LFxufTtcblxuZXhwb3J0IGRlZmF1bHQgVml6dTtcbiJdfQ=="}